import{h,r as u,j as c,as as f}from"./index-41237f89.js";import{u as l,b}from"./useApiUserContact-ac76c384.js";import{U as y}from"./UserContactEdit.Form-55eab568.js";function p(t,e){const n=/^\+(\d+)-(\d+)-(\d+)-(\d+)$/,[,i,...r]=e.match(n),s=r.join("-");if(t==="countryCode")return`+${i}`;if(t==="phoneNumber")return s;throw new Error('Invalid parameter. Please specify "countryCode" or "phoneNumber".')}function U({setInputChanged:t}){const{data:e}=l(),{isLoading:n,mutate:i}=b(),r=h({defaultValues:{id:e.id,city:e.city,phone:e.phone,country:e.country,province:e.province,zip_code:e.zip_code,birth_date:e.birth_date,country_code:e.phone?p("countryCode",e.phone):"+63",phone_number:e.phone&&p("phoneNumber",e.phone)},mode:"onTouched"}),{formState:{isDirty:s}}=r,a=o=>{const m=o.phone_number?`${o.country_code}-${o.phone_number}`:"";o.phone=m,delete o.country_code,delete o.phone_number;const d={...o,_method:"PATCH"};i(d)};return u.useEffect(()=>{t(s)},[s]),c.jsxs(u.Fragment,{children:[c.jsx(y,{name:"contactForm",form:r,isSubmitting:n,handleContactSubmit:a}),c.jsx("div",{className:"flex justify-end p-5",children:c.jsx(f,{form:"contactForm",text:"Update",loadingText:"Updating",isSubmitting:n})})]})}export{U as default};
