import{y as l,z as a,A as u,C as o,m as h,D as d,E as p,a as k,v as n,U as c}from"./index-81aa8ea7.js";import{l as t}from"./LogAxiosError-5a5a5899.js";const y=async e=>{try{return(await l.get(`/search-skills?keyword=${e}`)).data.skills}catch(s){throw a("Failed to search skill. API request failed: ",s.message),t(),new Error("Failed to search skill. API request failed")}},S=async e=>await l.post(`/add-skill?skill_id=${e}`),m=async e=>{try{return await l.delete(`/remove-skill?skill_id=${e}`)}catch(s){throw a("Failed to remove skill. API request failed:",s.message),t(),new Error("Failed to remove skill. API request failed")}},A=async()=>{try{return(await l.get("/get-user-skills")).data.skills}catch(e){throw a("Failed to fetch user skills. API request failed:",e.message),t(),new Error("Failed to fetch user skills. API request failed")}},f=e=>u({queryKey:["searchSkill"],queryFn:async()=>{try{return await y(e)}catch(s){throw a("Handling searchSkill Response Failed on useApiSkill hook:",s.message),new Error("Handling searchSkill Response Failed")}},cacheTime:o(60,"mins"),staleTime:o(60,"mins")}),F=()=>{const e=h(),s=d();return p(r=>S(r),{onSuccess:async()=>{s.invalidateQueries("searchSkill"),e(n(c.userAddSkillSuccessModal.name))},onError:r=>{const i=r.response.data.error||"An error occurred";e(n(c.userAddSkillErrorModal.name,{error:i}))}})},U=()=>{const{authenticatedUser:e}=k(),s=d();try{return async r=>{(await m(r)).status===200&&s.refetchQueries(["fetchUserSkills",e.id])}}catch(r){throw a("Handling removeUserSkill Response Failed on useApiSkill hook:",r.message),new Error("Handling removeUserSkill Response Failed")}},v=(e=!0)=>{const{authenticatedUser:s}=k();return u({queryKey:["fetchUserSkills",s.id],queryFn:async()=>{try{return await A()}catch(r){throw a("Handling fetchUserSkills Response Failed on useApiSkill hook:",r.message),new Error("Handling fetchUserSkills Response Failed")}},enabled:e,suspense:!0,cacheTime:1/0})};export{U as a,f as b,F as c,v as u};
