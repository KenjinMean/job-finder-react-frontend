import{u as J,r as n,n as N,j as e,P,L as R,f as k,J as L}from"./index-2d965194.js";import{J as I}from"./JobContainer.Component-d236fef4.js";import"./formatSalary-a9c72987.js";const S="/job-finder-react-frontend/assets/option-52e9d5ed.png";function w(r,t){const a=new URLSearchParams(r.search),s={};for(const[o,i]of a.entries())s[o]=i;return s}function U(){var d;const r=J(),t=n.useRef(null),a=w(r),{data:s,hasNextPage:o,refetch:i,fetchNextPage:b,isFetching:p,isFetchingNextPage:l}=N(a),m=()=>{t.current&&o&&!l&&b()};return n.useEffect(()=>{const c=new IntersectionObserver(u=>{u[0].isIntersecting&&m()});return t.current&&c.observe(t.current),()=>{t.current&&c.unobserve(t.current)}},[m]),n.useEffect(()=>{i()},[r]),e.jsxs(n.Fragment,{children:[e.jsx(P,{title:"Job Search Results"}),(d=s==null?void 0:s.pages)==null?void 0:d.map((c,u)=>{var h,x;return e.jsx(n.Fragment,{children:(x=(h=c.data)==null?void 0:h.data)==null?void 0:x.map((f,g,j)=>{const v=g===j.length-1;return e.jsxs("div",{className:"relative",ref:v?t:null,children:[e.jsx("button",{onClick:()=>console.log("clicked"),className:"absolute z-10 p-1 transition-all duration-300 border rounded-full right-5 top-5",children:e.jsx("img",{src:S,alt:"Menu icon",className:"w-5 h-5"})}),e.jsx(R,{to:`${k.jobDetailsPage}${f.slug}`,children:e.jsx(I,{job:f})})]},f.id)})},u)}),l&&e.jsx("div",{className:"pt-5 ",children:e.jsx(L,{})}),!o&&!p&&!l&&e.jsxs("div",{className:"w-full mt-5 text-lg font-semibold text-center text-content-black",children:["No more jobs available for the search: ",a.query]})]})}export{U as default};
